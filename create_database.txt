DROP DATABASE BIBTEX_DB;

CREATE DATABASE BIBTEX_DB;

CREATE TABLE CATEGORIES(
    `categoryID` int NOT NULL AUTO_INCREMENT,
    `name` varchar(255) NOT NULL,
    PRIMARY KEY(`categoryID`)
);

CREATE TABLE BOOKS(
    `ID` int NOT NULL AUTO_INCREMENT,
    `title` varchar(255) NOT NULL,
    `author` varchar(255) NOT NULL DEFAULT 'n/a',
    `publisher` varchar(255) NOT NULL DEFAULT 'n/a',
    `year` varchar(30) NOT NULL,
    `category` int NOT NULL,
    PRIMARY KEY(`ID`),
    FOREIGN KEY fk_cat(`category`) REFERENCES CATEGORIES(categoryID)
);

CREATE TABLE RESOURCE_CATEGORY(
	`ID` int NOT NULL AUTO_INCREMENT,
	`tagName` varchar(255) NOT NULL,
	PRIMARY KEY(`ID`)
);

CREATE TABLE BOOK_RESOURCES(
	`ID` int NOT NULL AUTO_INCREMENT,
	`bookID` int NOT NULL,
	`tagID` int NOT NULL,
	`link` varchar(255) NOT NULL,
	PRIMARY KEY(`ID`),
	FOREIGN KEY fk_tag(`tagID`) REFERENCES RESOURCE_CATEGORY(ID),
	FOREIGN KEY fk_bookid(`bookID`) REFERENCES BOOKS(ID) ON DELETE CASCADE
);


INSERT INTO `categories` 
(`categoryID`, `name`) 
VALUES 
(NULL, 'matematyka'), 
(NULL, 'sieci komputerowe'),
(NULL, 'teoria graf√≥w'),
(NULL, 'sztuczna inteligencja'),
(NULL, 'elektronika'),
(NULL, 'kryptografia'),
(NULL, 'robotyka'),
(NULL, 'socjologia')
